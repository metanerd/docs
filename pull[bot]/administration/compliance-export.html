


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compliance Export Beta (E20) &mdash; Mattermost 5.31 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Audit Log v2 (Experimental) (E20)" href="audit-log.html" />
    <link rel="prev" title="Compliance Reporting and Oversight (E20)" href="compliance.html" />
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-K874RWM');</script>
	<!-- End Google Tag Manager -->


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Mattermost
          

          
          </a>

          
            
            
              <div class="version">
                5.31
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/cloud-admin-guide.html">Cloud Administrator's Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../guides/administrator.html">Self-Managed Administrator's Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview/architecture.html">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deployment/deployment.html">Deployment Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#installing-mattermost">Installing Mattermost</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#deployment">Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#configure-mattermost">Configure Mattermost</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#incident-management">Incident Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#mobile-apps">Mobile Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#onboard-users">Onboard Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#administration">Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#upgrade-mattermost">Upgrade Mattermost</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#mattermost-integrations">Mattermost Integrations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../guides/administrator.html#mattermost-compliance">Mattermost Compliance</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ediscovery.html">Electronic Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="compliance.html">Compliance Reporting and Oversight (E20)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Compliance Export Beta (E20)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#set-up-guide">Set Up Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="#frequently-asked-questions-faq">Frequently Asked Questions (FAQ)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="audit-log.html">Audit Log v2 (Experimental) (E20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="data-retention.html">Data Retention Policy (E20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom-terms-of-service.html">Custom Terms of Service (Beta) (E20)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#scaling-mattermost">Scaling Mattermost</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/administrator.html#community-managed-documentation">Community-Managed Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/user.html">User's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://developers.mattermost.com/">Developer's Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Mattermost</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          


  


<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      <li><a href="../guides/administrator.html">Self-Managed Administrator’s Guide</a> &raquo;</li>
    
    <li>Compliance Export Beta (E20)</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/mattermost/docs/blob/master/source/administration/compliance-export.rst" class="fa fa-github"> Edit</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compliance-export-beta-e20">
<h1>Compliance Export Beta (E20)<a class="headerlink" href="#compliance-export-beta-e20" title="Permalink to this headline">¶</a></h1>
<p>Available in <a class="reference external" href="https://mattermost.com/pricing-self-managed/">Enterprise Edition E20</a>.</p>
<p>This feature enables compliance exports to be produced from the System Console, containing all messages including:</p>
<ul class="simple">
<li>Those made in direct message channels</li>
<li>File uploads</li>
<li>Posts from plugins</li>
<li>Posts from bots/webhooks</li>
</ul>
<p>The exports include information on channel member history at the time the message was posted.</p>
<p>From Mattermost 5.18, entries for deleted messages and files are included in CSV and Actiance reports. The deleted content is included in the compliance export. Global Relay reports include file deletion entries but message deletion entries are excluded.</p>
<p>By default, Mattermost stores all message history providing an unlimited search history to admins and end users. In Enterprise Edition E20, you may set a <a class="reference external" href="https://docs.mattermost.com/administration/data-retention.html">custom data retention policy</a> for how long messages and file uploads are kept in Mattermost channels and direct messages.</p>
<p>Enterprise deployments with a requirement to archive history beyond the data retention period can enable this add-on to export compliance reports to third-party systems. Integration with Actiance Vantage and Global Relay are currently supported, with integrations with other systems in the roadmap.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature will replace the existing <a class="reference internal" href="compliance.html"><span class="doc">Compliance feature</span></a> in a future release. Compliance exports to CSV will continue to be available in Enterprise Edition E20.</p>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="set-up-guide">
<h2>Set Up Guide<a class="headerlink" href="#set-up-guide" title="Permalink to this headline">¶</a></h2>
<p>Use the following guides to configure exports for CSV, Actiance XML, or Global Relay EML. Compliance exports are written to the <code class="docutils literal notranslate"><span class="pre">exports</span></code> subdirectory of the configured <a class="reference external" href="https://docs.mattermost.com/administration/config-settings.html#storage">Local Storage directory</a> in the chosen format. If you have configured Mattermost to use S3 storage, the exports are written to the <code class="docutils literal notranslate"><span class="pre">exports</span></code> directory in the Mattermost bucket.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The compliance exports do not contain posts sent before the feature was enabled, but you can export past history via the <code class="docutils literal notranslate"><span class="pre">export</span></code> <a class="reference internal" href="command-line-tools.html"><span class="doc">command line tool</span></a>. Posts made prior to upgrading to Mattermost v4.5 will have less accurate channel member history information.</p>
</div>
<div class="section" id="csv">
<h3>CSV<a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Go to <strong>System Console &gt; Compliance &gt; Compliance Export (Beta)</strong> (or <strong>System Console &gt; Advanced &gt; Compliance Export (Beta)</strong> in versions prior to 5.12).</li>
<li>Set <strong>Enable Compliance Exports</strong> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li>Set the <strong>Compliance Export time</strong>. This is the start time of the daily scheduled compliance export job and must be a 24-hour time stamp in the form HH:MM. Choose a time when fewer people are using your system.</li>
<li>Set the export file format to <strong>CSV</strong>.</li>
<li>Choose <strong>Save</strong>.</li>
</ol>
<p>The daily compliance export job creates a zip file with a unique job identifier of all messages posted in the last 24 hours. You can unzip the file to easily transform the default CSV format into a desired format for your third-party archive system.</p>
<p>For a sample CSV output, <a class="reference external" href="https://github.com/mattermost/docs/blob/master/source/samples/csv_export.zip">download a CSV export file here</a>.</p>
</div>
<div class="section" id="actiance-xml">
<h3>Actiance XML<a class="headerlink" href="#actiance-xml" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Go to <strong>System Console &gt; Compliance &gt; Compliance Export (Beta)</strong> (or <strong>System Console &gt; Advanced &gt; Compliance Export (Beta)</strong> in versions prior to 5.12).</li>
<li>Set <strong>Enable Compliance Exports</strong> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li>Set the <strong>Compliance Export time</strong>. This is the start time of the daily scheduled compliance export job and must be a 24-hour time stamp in the form HH:MM. Choose a time when fewer people are using your system.</li>
<li>Set the export file format to <strong>Actiance XML</strong>.</li>
<li>Choose <strong>Save</strong>.</li>
</ol>
<p>The daily compliance export job creates a zip file with a unique job identifier of all messages posted in the last 24 hours. Once you’ve selected Actiance XML as your file format, you can set up an integration with Actiance Vantage archive system. For more information, see <a class="reference external" href="https://www.actiance.com/products/vantage/">their homepage</a>. For a sample Actiance output, <a class="reference external" href="https://github.com/mattermost/docs/blob/master/source/samples/actiance_export.xml">download an Actiance XML export file here</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In Actiance XML exports, channel type is prepended to the channel names.</p>
</div>
</div>
<div class="section" id="global-relay-eml">
<h3>Global Relay EML<a class="headerlink" href="#global-relay-eml" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Go to <strong>System Console &gt; Compliance &gt; Compliance Export (Beta)</strong> (or <strong>System Console &gt; Advanced &gt; Compliance Export (Beta)</strong> in versions prior to 5.12).</li>
<li>Set <strong>Enable Compliance Exports</strong> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li>Set the <strong>Compliance Export time</strong>. This is the start time of the daily scheduled compliance export job and must be a 24-hour time stamp in the form HH:MM. Choose a time when fewer people are using your system.</li>
<li>Set the export file format to <strong>GlobalRelay EML</strong>.</li>
<li>Select <cite>A9/Type 9</cite> or <cite>A10/Type 10</cite> for the <strong>Global Relay Customer Account</strong>. This is the type of Global Relay customer account your organization has.</li>
<li>Set the <strong>Global Relay SMTP username</strong>, <strong>Global Relay SMTP password</strong>, and <strong>Global Relay SMTP email address</strong>, as provided by Global Relay.</li>
<li>Choose <strong>Save</strong>.</li>
</ol>
<p>Once you have selected Global Relay EML as your file format, you can set up an integration with Global Relay archive system. For more information, see <a class="reference external" href="https://www.globalrelay.com/gr-services/archive">Global Relay Archive</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Messages larger than 250 MB will have their attachments removed because they are too large to send to Global Relay. An error is added to the server logs with id <code class="docutils literal notranslate"><span class="pre">global_relay_attachments_removed</span></code>. It includes the post ID the attachments were removed from, as well as the attachment IDs. A <a class="reference external" href="https://mattermost.atlassian.net/browse/MM-10038">ticket is queued to better handle large messages</a>.</p>
</div>
<p>For more information on Global Relay archive system, see <a class="reference external" href="https://www.globalrelay.com/">their homepage</a>.</p>
</div>
</div>
<div class="section" id="frequently-asked-questions-faq">
<h2>Frequently Asked Questions (FAQ)<a class="headerlink" href="#frequently-asked-questions-faq" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-export-past-history">
<h3>How do I export past history?<a class="headerlink" href="#how-do-i-export-past-history" title="Permalink to this headline">¶</a></h3>
<p>Run the <code class="docutils literal notranslate"><span class="pre">export</span></code> <a class="reference internal" href="command-line-tools.html"><span class="doc">command line tool</span></a>. You can specify an <cite>exportFrom</cite> option to export data from a specified timestamp. All posts that were made after this timestamp will be exported.</p>
</div>
<div class="section" id="what-happens-if-i-export-data-manually">
<h3>What happens if I export data manually?<a class="headerlink" href="#what-happens-if-i-export-data-manually" title="Permalink to this headline">¶</a></h3>
<p>If the compliance export job is run automatically, manually via the System Console, or manually via the CLI (without the <code class="docutils literal notranslate"><span class="pre">--exportFrom</span></code> option), it exports all posts that were made since the last post that the previous execution of the job exported. If this is the first time that the job has ever run, all posts that were made since the feature was enabled will be exported.
If the <code class="docutils literal notranslate"><span class="pre">--exportFrom</span></code> option is specified with the CLI command, all posts that have been made since the supplied timestamp will be exported.</p>
<p>When run manually via the System Console, CSV and Actiance XML files are written to the <cite>exports</cite> subdirectory of the configured <a class="reference external" href="https://docs.mattermost.com/administration/config-settings.html?#local-storage-directory">Local Storage Directory</a>.  Files will be written to a folder with names based on an epoch time range. Global Relay EML export format will be mailed to the configured email address when run manually.</p>
</div>
<div class="section" id="why-are-compliance-exports-beta">
<h3>Why are compliance exports beta?<a class="headerlink" href="#why-are-compliance-exports-beta" title="Permalink to this headline">¶</a></h3>
<p>This feature is labelled as beta for the following reasons:</p>
<ol class="arabic simple">
<li>The job to carry out a compliance export has not been tested on a system with 10,000s of concurrent active users.</li>
<li>Exports do not yet include messages with special types, namely system messages, webhook message attachments, and custom plugin messages.</li>
<li>There isn’t yet a way to distinguish who edited or deleted a message, nor which message is a reply or an edit of another message.</li>
<li>The QA process is still in progress.</li>
</ol>
</div>
<div class="section" id="how-do-i-know-if-a-compliance-export-job-fails">
<h3>How do I know if a compliance export job fails?<a class="headerlink" href="#how-do-i-know-if-a-compliance-export-job-fails" title="Permalink to this headline">¶</a></h3>
<p>Mattermost provides the status of each compliance export job in <strong>System Console &gt; Compliance &gt; Compliance Export (Beta)</strong> (or <strong>System Console &gt; Advanced &gt; Compliance Export (Beta)</strong> in versions prior to 5.12). Here, you can see if the job succeeded or failed, including the number of messages and files exported.</p>
<p>In addition, any failures are returned in the server logs. The error log begins with the string <code class="docutils literal notranslate"><span class="pre">Failed</span> <span class="pre">job</span></code> and includes a job_id key/value pair. Compliance export job failures are identified with worker name <code class="docutils literal notranslate"><span class="pre">MessageExportWorker</span></code>. You can optionally create a script that programmatically queries for such failures and notifies the appropriate system.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="audit-log.html" class="btn btn-neutral float-right" title="Audit Log v2 (Experimental) (E20)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="compliance.html" class="btn btn-neutral" title="Compliance Reporting and Oversight (E20)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2020 Mattermost

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
 




<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-cog">&nbsp;&nbsp;Options</span>&nbsp;
        <span class="fa fa-angle-up"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Contribute</dt>
            <dd>
                <a href="https://github.com/mattermost/docs/issues">Report a Problem</a>
            </dd>
            
            <dd>
                <a href="https://github.com/mattermost/docs/blob/master/source/administration/compliance-export.rst"> Edit on GitHub</a>
            </dd>
            
        </dl>
    </div>
</div>


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/myscript.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
	<header>
	<div class="header__container">
		<div class="search__icon">
			<i class="fa fa-search"></i>
		</div>
		<a href="https://docs.mattermost.com/" class="header__logo">
			<img width="176" src="https://about.mattermost.com/wp-content/uploads/2017/08/Mattermost-Logo-Blue.svg">
		</a>
		<div class="links__icon">
			<i class="fa fa-bars"></i>
		</div>
		<ul class="header__links">
			<li><a href="https://developers.mattermost.com/">Developers</a></li>
			<li><a href="https://mattermost.com/features/">Product</a></li>
			<li><a href="https://mattermost.com/pricing/">Pricing</a></li>
			<li><a href="https://mattermost.com/blog/">Blog</a></li>
			<li><a href="https://mattermost.com/download/">Download</a></li>
			<li><a href="https://mattermost.com/trial/">Trial</a></li>
		</ul>
		<div class="header__searchbar">
			<form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
                <input type="text" name="q" placeholder="Search by keyword" autofocus />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
		</div>
	</div>
</header>
	<script type="text/javascript">
		/* Temporary fix for the search capability. Fix has been committed to the theme's master;
		   however, waiting a new release to the theme.  This fix should remain in place until that
		   time.  sphinx_rtd_theme is current v0.1.10a0. Commit for the fix in the
		   theme can be found at: https://github.com/snide/sphinx_rtd_theme/commit/a5e0e304
		 */
        if(DOCUMENTATION_OPTIONS) {
			DOCUMENTATION_OPTIONS.SOURCELINK_SUFFIX = '.txt'
        }
    </script>


</body>
</html>