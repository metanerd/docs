


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interactive Messages: Buttons and Menus &mdash; Mattermost 5.31 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Interactive Dialogs" href="interactive-dialogs.html" />
    <link rel="prev" title="Message Attachments" href="message-attachments.html" />
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-K874RWM');</script>
	<!-- End Google Tag Manager -->


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Mattermost
          

          
          </a>

          
            
            
              <div class="version">
                5.31
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/cloud-admin-guide.html">Cloud Administrator's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/administrator.html">Self-Managed Administrator's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/user.html">User's Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../guides/integration.html">Integration Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../integrations/jira.html">Jira Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/zoom.html">Zoom Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/zapier.html">Zapier Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks-incoming.html">Incoming Webhooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks-outgoing.html">Outgoing Webhooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="slash-commands.html">Slash Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administration/plugins.html">Plugins (Beta)</a></li>
<li class="toctree-l2"><a class="reference internal" href="message-attachments.html">Message Attachments</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Interactive Messages: Buttons and Menus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#message-buttons">Message Buttons</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-menus">Message Menus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#message-menus-for-channels">Message Menus for Channels</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-menus-for-users">Message Menus for Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tips-and-best-practices">Tips and Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#share-your-integration">Share Your Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slack-compatibility">Slack Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequently-asked-questions">Frequently Asked Questions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#are-message-buttons-and-menus-supported-in-ephemeral-messages">Are message buttons and menus supported in ephemeral messages?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#why-does-an-interactive-button-or-menu-return-a-400-error">Why does an interactive button or menu return a 400 error?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-do-i-manage-properties-of-an-interactive-message">How do I manage properties of an interactive message?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interactive-dialogs.html">Interactive Dialogs</a></li>
<li class="toctree-l2"><a class="reference internal" href="bot-accounts.html">Bot Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="personal-access-tokens.html">Personal Access Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth-2-0-applications.html">OAuth 2.0 Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration-faq.html">Integrations FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/embedding.html">Embedding Mattermost in Other Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrations/webhook.html">Using Mattermost with Webhook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://developers.mattermost.com/">Developer's Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Mattermost</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          


  


<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      <li><a href="../guides/integration.html">Mattermost Integration Guide</a> &raquo;</li>
    
    <li>Interactive Messages: Buttons and Menus</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/mattermost/docs/blob/master/source/developer/interactive-messages.rst" class="fa fa-github"> Edit</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interactive-messages-buttons-and-menus">
<span id="interactive-messages"></span><h1>Interactive Messages: Buttons and Menus<a class="headerlink" href="#interactive-messages-buttons-and-menus" title="Permalink to this headline">Â¶</a></h1>
<p>Mattermost supports interactive message buttons and menus for <a class="reference internal" href="webhooks-incoming.html"><span class="doc">incoming</span></a> and <a class="reference internal" href="webhooks-outgoing.html"><span class="doc">outgoing webhooks</span></a>, <a class="reference internal" href="slash-commands.html"><span class="doc">custom slash commands</span></a>, and <a class="reference internal" href="../administration/plugins.html"><span class="doc">plugins</span></a> via actions. They help make your integrations richer by completing common tasks inside Mattermost conversations, increasing user engagement and productivity.</p>
<img alt="../_images/interactive-messages.png" src="../_images/interactive-messages.png" />
<p>For information on interactive dialogs, <a class="reference internal" href="interactive-dialogs.html"><span class="doc">see here</span></a>.</p>
<p>Use interactive messages to simplify complex workflows by allowing users to take quick actions directly through your integration post. For example, they enable your integration to:</p>
<ul class="simple">
<li>Mark a task complete in your project management tracker</li>
<li>Conduct a customer survey or a poll</li>
<li>Initiate a command to merge a branch into a release</li>
</ul>
<p>To try it out, you can use this <a class="reference external" href="https://github.com/matterpoll/matterpoll">Matterpoll plugin</a> to add polling to Mattermost channels via a <code class="docutils literal notranslate"><span class="pre">/poll</span></code> slash command.</p>
<img alt="../_images/poll.png" src="../_images/poll.png" />
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#message-buttons" id="id1">Message Buttons</a></li>
<li><a class="reference internal" href="#message-menus" id="id2">Message Menus</a></li>
<li><a class="reference internal" href="#tips-and-best-practices" id="id3">Tips and Best Practices</a></li>
<li><a class="reference internal" href="#share-your-integration" id="id4">Share Your Integration</a></li>
<li><a class="reference internal" href="#slack-compatibility" id="id5">Slack Compatibility</a></li>
<li><a class="reference internal" href="#frequently-asked-questions" id="id6">Frequently Asked Questions</a></li>
</ul>
</div>
<div class="section" id="message-buttons">
<h2><a class="toc-backref" href="#contents">Message Buttons</a><a class="headerlink" href="#message-buttons" title="Permalink to this headline">Â¶</a></h2>
<p>Add message buttons as <code class="docutils literal notranslate"><span class="pre">actions</span></code> in your integration <a class="reference external" href="https://docs.mattermost.com/developer/message-attachments.html">message attachments</a>.</p>
<p>The following payload gives an example that uses message buttons.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;attachments&quot;: [
    {
      &quot;pretext&quot;: &quot;This is the attachment pretext.&quot;,
      &quot;text&quot;: &quot;This is the attachment text.&quot;,
      &quot;actions&quot;: [
        {
          &quot;id&quot;: &quot;message&quot;,
          &quot;name&quot;: &quot;Ephemeral Message&quot;,
          &quot;integration&quot;: {
            &quot;url&quot;: &quot;http://127.0.0.1:7357&quot;,
            &quot;context&quot;: {
              &quot;action&quot;: &quot;do_something_ephemeral&quot;
            }
          }
        }, {
          &quot;id&quot;: &quot;update&quot;,
          &quot;name&quot;: &quot;Update&quot;,
          &quot;integration&quot;: {
            &quot;url&quot;: &quot;http://127.0.0.1:7357&quot;,
            &quot;context&quot;: {
              &quot;action&quot;: &quot;do_something_update&quot;
            }
          }
        }
      ]
    }
  ]
}
</pre></div>
</div>
<p>The integration can respond with an update to the original post, or with an ephemeral message:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;update&quot;: {
    &quot;message&quot;: &quot;Updated!&quot;,
    &quot;props&quot;: {}
  },
  &quot;ephemeral_text&quot;: &quot;You updated the post!&quot;
}
</pre></div>
</div>
<img alt="../_images/interactive_message.gif" src="../_images/interactive_message.gif" />
</div>
<div class="section" id="message-menus">
<h2><a class="toc-backref" href="#contents">Message Menus</a><a class="headerlink" href="#message-menus" title="Permalink to this headline">Â¶</a></h2>
<p>Similar to buttons, add message menus as <code class="docutils literal notranslate"><span class="pre">actions</span></code> in your integration <a class="reference external" href="https://docs.mattermost.com/developer/message-attachments.html">message attachments</a>.</p>
<img alt="../_images/message-menus.png" src="../_images/message-menus.png" />
<p>The following payload gives an example that uses message menus.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;attachments&quot;: [
    {
      &quot;pretext&quot;: &quot;This is the attachment pretext.&quot;,
      &quot;text&quot;: &quot;This is the attachment text.&quot;,
      &quot;actions&quot;: [
        {
          &quot;id&quot;: &quot;action_options&quot;,
          &quot;name&quot;: &quot;Select an option...&quot;,
          &quot;integration&quot;: {
            &quot;url&quot;: &quot;http://127.0.0.1:7357/action_options&quot;,
            &quot;context&quot;: {
              &quot;action&quot;: &quot;do_something&quot;
            }
          },
          &quot;type&quot;: &quot;select&quot;,
          &quot;options&quot;: [
                  {
                      &quot;text&quot;: &quot;Option1&quot;,
                      &quot;value&quot;: &quot;opt1&quot;
                  },
                  {
                      &quot;text&quot;: &quot;Option2&quot;,
                      &quot;value&quot;: &quot;opt2&quot;
                  },
                  {
                      &quot;text&quot;: &quot;Option3&quot;,
                      &quot;value&quot;: &quot;opt3&quot;
                  }
          ]
        }
      ]
    }
  ]
}
</pre></div>
</div>
<p>The integration can respond with an update to the original post, or with an ephemeral message:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;update&quot;: {
    &quot;message&quot;: &quot;Updated!&quot;,
    &quot;props&quot;: {}
  },
  &quot;ephemeral_text&quot;: &quot;You updated the post!&quot;
}
</pre></div>
</div>
<div class="section" id="message-menus-for-channels">
<h3>Message Menus for Channels<a class="headerlink" href="#message-menus-for-channels" title="Permalink to this headline">Â¶</a></h3>
<p>You can provide a list of channels for message menus for users to select from. Users can only select from public channels in their teams.</p>
<p>Specify <code class="docutils literal notranslate"><span class="pre">channels</span></code> as your actionâs <code class="docutils literal notranslate"><span class="pre">data_source</span></code> as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;attachments&quot;: [
    {
      &quot;pretext&quot;: &quot;This is the attachment pretext.&quot;,
      &quot;text&quot;: &quot;This is the attachment text.&quot;,
      &quot;actions&quot;: [
        {
          &quot;id&quot;: &quot;action_options&quot;,
          &quot;name&quot;: &quot;Select an option...&quot;,
          &quot;integration&quot;: {
            &quot;url&quot;: &quot;http://127.0.0.1:7357/action_options&quot;,
            &quot;context&quot;: {
              &quot;action&quot;: &quot;do_something&quot;
            }
          },
          &quot;type&quot;: &quot;select&quot;,
          &quot;data_source&quot;: &quot;channels&quot;
        }
      ]
    }
  ]
}
</pre></div>
</div>
</div>
<div class="section" id="message-menus-for-users">
<h3>Message Menus for Users<a class="headerlink" href="#message-menus-for-users" title="Permalink to this headline">Â¶</a></h3>
<p>Similar to channels, you can also provide a list of users for message menus. The user can choose the user who is part of the Mattermost system.</p>
<p>Specify <code class="docutils literal notranslate"><span class="pre">users</span></code> as your actionâs <code class="docutils literal notranslate"><span class="pre">data_source</span></code> as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;attachments&quot;: [
    {
      &quot;id&quot;: &quot;action_options&quot;,
      &quot;pretext&quot;: &quot;This is the attachment pretext.&quot;,
      &quot;text&quot;: &quot;This is the attachment text.&quot;,
      &quot;actions&quot;: [
        {
          &quot;name&quot;: &quot;Select an option...&quot;,
          &quot;integration&quot;: {
            &quot;url&quot;: &quot;http://127.0.0.1:7357/action_options&quot;,
            &quot;context&quot;: {
              &quot;action&quot;: &quot;do_something&quot;
            }
          },
          &quot;type&quot;: &quot;select&quot;,
          &quot;data_source&quot;: &quot;users&quot;
        }
      ]
    }
  ]
}
</pre></div>
</div>
</div>
<div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">Â¶</a></h3>
<p>Below is a brief description of each parameter to help you customize the interactive message button and menu in Mattermost. For more information on message attachments, <a class="reference external" href="https://docs.mattermost.com/developer/message-attachments.html">see our documentation</a>.</p>
<dl class="docutils">
<dt>ID</dt>
<dd>A per post unique identifier.</dd>
<dt>Name</dt>
<dd>Give your action a descriptive name.</dd>
<dt>URL</dt>
<dd>The actions are backed by an integration that handles HTTP POST requests when users click the message button. The URL parameter determines where this action is sent. The request contains an <code class="docutils literal notranslate"><span class="pre">application/json</span></code> JSON string. As of 5.14, relative URLs are accepted, simplifying the workflow when a plugin handles the action.</dd>
<dt>Context</dt>
<dd><p class="first">The requests sent to the specified URL contain the user ID, post ID, channel ID, team ID, and any context that was provided in the action definition. If the post was of type <code class="docutils literal notranslate"><span class="pre">Message</span> <span class="pre">Menus</span></code>, then context also contains the <code class="docutils literal notranslate"><span class="pre">selected_option</span></code> field with the user-selected option value. The post ID can be used to, for example, delete or edit the post after clicking on a message button.</p>
<p>A simple example of a request is given below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
&quot;user_id&quot;: &quot;rd49ehbqyjytddasoownkuqrxe&quot;,
&quot;post_id&quot;: &quot;gqrnh3675jfxzftnjyjfe4udeh&quot;,
&quot;channel_id&quot;: &quot;j6j53p28k6urx15fpcgsr20psq&quot;,
&quot;team_id&quot;: &quot;5xxzt146eax4tul69409opqjlf&quot;,
&quot;context&quot;: {
  &quot;action&quot;: &quot;do_something&quot;
  }
}
</pre></div>
</div>
<p>In most cases, your integration will do one or both of these things:</p>
<ol class="arabic simple">
<li><strong>Identifying which action was triggered</strong>. For example, a GitHub integration might store something like this in the context:</li>
</ol>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
&quot;user_id&quot;: &quot;rd49ehbqyjytddasoownkuqrxe&quot;,
&quot;post_id&quot;: &quot;gqrnh3675jfxzftnjyjfe4udeh&quot;,
&quot;channel_id&quot;: &quot;j6j53p28k6urx15fpcgsr20psq&quot;,
&quot;team_id&quot;: &quot;5xxzt146eax4tul69409opqjlf&quot;,
&quot;context&quot;: {
  &quot;repo&quot;: &quot;mattermost/mattermost-server&quot;
  &quot;pr&quot;: 1234,
  &quot;action&quot;: &quot;merge&quot;
  }
}
</pre></div>
</div>
</div></blockquote>
<p>In the example above, when the message button is clicked, your integration sends a request to the specified URL with the intention to merge the pull request identified by the context.</p>
<ol class="arabic simple" start="2">
<li><strong>Authenticating the server</strong>. An important property of the context parameter is that itâs kept confidential. If your integration is not behind a firewall, you could add a token to your context without users ever being able to see it:</li>
</ol>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
&quot;user_id&quot;: &quot;rd49ehbqyjytddasoownkuqrxe&quot;,
&quot;post_id&quot;: &quot;gqrnh3675jfxzftnjyjfe4udeh&quot;,
&quot;channel_id&quot;: &quot;j6j53p28k6urx15fpcgsr20psq&quot;,
&quot;team_id&quot;: &quot;5xxzt146eax4tul69409opqjlf&quot;,
&quot;context&quot;: {
  &quot;repo&quot;: &quot;mattermost/mattermost-server&quot;
  &quot;pr&quot;: 1234,
  &quot;action&quot;: &quot;merge&quot;,
  &quot;token&quot;: &quot;somerandomlygeneratedsecret&quot;
  }
}
</pre></div>
</div>
</div></blockquote>
<p>Then, when your integration receives the request, it can verify that the token matches one that you previously generated and know that the request is legitimately coming from the Mattermost server and is not forged.</p>
<p>Depending on the application, integrations can also perform authentication statelessly with cryptographic signatures such as:</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
&quot;user_id&quot;: &quot;rd49ehbqyjytddasoownkuqrxe&quot;,
&quot;post_id&quot;: &quot;gqrnh3675jfxzftnjyjfe4udeh&quot;,
&quot;channel_id&quot;: &quot;j6j53p28k6urx15fpcgsr20psq&quot;,
&quot;team_id&quot;: &quot;5xxzt146eax4tul69409opqjlf&quot;,
&quot;context&quot;: {
  &quot;repo&quot;: &quot;mattermost/mattermost-server&quot;
  &quot;pr&quot;: 1234,
  &quot;action&quot;: &quot;merge&quot;,
  &quot;signature&quot;: &quot;mycryptographicsignature&quot;
  }
}
</pre></div>
</div>
</div></blockquote>
<p>Itâs also possible for integrations to do both of these things with a single token and use something like this as context:</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
&quot;user_id&quot;: &quot;rd49ehbqyjytddasoownkuqrxe&quot;,
&quot;post_id&quot;: &quot;gqrnh3675jfxzftnjyjfe4udeh&quot;,
&quot;channel_id&quot;: &quot;j6j53p28k6urx15fpcgsr20psq&quot;,
&quot;team_id&quot;: &quot;5xxzt146eax4tul69409opqjlf&quot;,
&quot;context&quot;: {
  &quot;action_id&quot;: &quot;someunguessableactionid&quot;
  }
}
</pre></div>
</div>
</div></blockquote>
<p class="last">Then, when the integration receives the request, it can act based on the action ID.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="tips-and-best-practices">
<h2><a class="toc-backref" href="#contents">Tips and Best Practices</a><a class="headerlink" href="#tips-and-best-practices" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic simple">
<li>The external application may be written in any programming language. It needs to provide a URL which receives the request sent by your Mattermost server and responds within the required JSON format.</li>
<li>To get started, you can use this <a class="reference external" href="https://github.com/matterpoll/matterpoll">sample plugin</a> to add polling to Mattermost channels via a <cite>/poll</cite> slash command.</li>
</ol>
</div>
<div class="section" id="share-your-integration">
<h2><a class="toc-backref" href="#contents">Share Your Integration</a><a class="headerlink" href="#share-your-integration" title="Permalink to this headline">Â¶</a></h2>
<p>If youâve built an integration for Mattermost, please consider <a class="reference external" href="https://mattermost.org/share-your-mattermost-projects/">sharing your work</a> in our <a class="reference external" href="https://integrations.mattermost.com/">app directory</a>.</p>
<p>The <a class="reference external" href="https://integrations.mattermost.com/">app directory</a> lists open source integrations developed by the Mattermost community and are available for download, customization, and deployment to your private cloud or self-managed infrastructure.</p>
</div>
<div class="section" id="slack-compatibility">
<h2><a class="toc-backref" href="#contents">Slack Compatibility</a><a class="headerlink" href="#slack-compatibility" title="Permalink to this headline">Â¶</a></h2>
<p>Like Slack, actions are specified in an <strong>Actions</strong> list within the message attachment. Moreover, your integrations can react with ephemeral messages or message updates similar to Slack.</p>
<p>However, the schema for these objects is slightly different given Slack requires a Slack App and action URL to be pre-configured beforehand. Mattermost instead allows an integration to create an interactive message without pre-configuration.</p>
<p>If your <cite>ephemeral_text</cite> gets incorrectly handled by the Slack-compatibility logic, send <code class="docutils literal notranslate"><span class="pre">&quot;skip_slack_parsing&quot;:true</span></code> along your <cite>ephemeral_text</cite> to bypass it.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{
  &quot;update&quot;: {
    &quot;message&quot;: &quot;Updated!&quot;
  },
  &quot;ephemeral_text&quot;: &quot;You updated the post!&quot;,
  &quot;skip_slack_parsing&quot;: true
}
</pre></div>
</div>
</div>
<div class="section" id="frequently-asked-questions">
<h2><a class="toc-backref" href="#contents">Frequently Asked Questions</a><a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="are-message-buttons-and-menus-supported-in-ephemeral-messages">
<h3>Are message buttons and menus supported in ephemeral messages?<a class="headerlink" href="#are-message-buttons-and-menus-supported-in-ephemeral-messages" title="Permalink to this headline">Â¶</a></h3>
<p>Yes, message buttons and menus are supported in ephemeral messages in Mattermost 5.10 and later. This applies to integrations using plugins, the RESTful API and webhooks, across the browser and desktop app.</p>
<p>As an advanced feature, you can also use plugins to update the contents of an ephemeral message with message buttons or menus with the <a class="reference external" href="https://developers.mattermost.com/extend/plugins/server/reference/#API.UpdateEphemeralPost">UpdateEphemeralMessage plugin API</a>.</p>
</div>
<div class="section" id="why-does-an-interactive-button-or-menu-return-a-400-error">
<h3>Why does an interactive button or menu return a 400 error?<a class="headerlink" href="#why-does-an-interactive-button-or-menu-return-a-400-error" title="Permalink to this headline">Â¶</a></h3>
<p>It is likely for one of three reasons:</p>
<ol class="arabic simple">
<li>Mattermost wasnât able to connect to the integration. If the integration is on your internal infrastructure, itâll need to be whitelisted (see <a class="reference external" href="https://docs.mattermost.com/administration/config-settings.html#allow-untrusted-internal-connections-to">âAllowedUntrustedInternalConnectionsâ config.json setting</a>). The log will include the text <code class="docutils literal notranslate"><span class="pre">err=address</span> <span class="pre">forbidden</span></code> in the error message.</li>
<li>The integration didnât return HTTP status 200. The log will include the text <code class="docutils literal notranslate"><span class="pre">status=XXX</span></code> in the error message.</li>
<li>The integration didnât return a valid JSON response. The log will include the text <code class="docutils literal notranslate"><span class="pre">err=some</span> <span class="pre">json</span> <span class="pre">error</span> <span class="pre">message</span></code> in the error message.</li>
</ol>
</div>
<div class="section" id="how-do-i-manage-properties-of-an-interactive-message">
<h3>How do I manage properties of an interactive message?<a class="headerlink" href="#how-do-i-manage-properties-of-an-interactive-message" title="Permalink to this headline">Â¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">update.Props</span></code> in the following ways to manage properties (<code class="docutils literal notranslate"><span class="pre">Props</span></code>) of an interactive message after a user performs an action via an interactive button or menu:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">update.Props</span> <span class="pre">==</span> <span class="pre">nil</span></code> - Do not update <code class="docutils literal notranslate"><span class="pre">Props</span></code> field.</li>
<li><code class="docutils literal notranslate"><span class="pre">update.Props</span> <span class="pre">==</span> <span class="pre">{}</span></code> - Clear all properties, except the username and icon of the original message, as well as whether the message was pinned to channel or contained emoji reactions.</li>
<li><code class="docutils literal notranslate"><span class="pre">update.Props</span> <span class="pre">==</span> <span class="pre">some_props</span></code> - Post will be updated to <code class="docutils literal notranslate"><span class="pre">some_props</span></code>. Username and icon of the original message, and whether the message was pinned to channel or contained emoji reactions will not be updated.</li>
</ul>
</div></blockquote>
<p>Note that in 5.10 and earlier, <code class="docutils literal notranslate"><span class="pre">Update.Props</span> <span class="pre">==</span> <span class="pre">nil</span></code> incorrectly cleared all properties of the interactive message.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="interactive-dialogs.html" class="btn btn-neutral float-right" title="Interactive Dialogs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="message-attachments.html" class="btn btn-neutral" title="Message Attachments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2020 Mattermost

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
 




<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-cog">&nbsp;&nbsp;Options</span>&nbsp;
        <span class="fa fa-angle-up"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Contribute</dt>
            <dd>
                <a href="https://github.com/mattermost/docs/issues">Report a Problem</a>
            </dd>
            
            <dd>
                <a href="https://github.com/mattermost/docs/blob/master/source/developer/interactive-messages.rst"> Edit on GitHub</a>
            </dd>
            
        </dl>
    </div>
</div>


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/myscript.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
	<header>
	<div class="header__container">
		<div class="search__icon">
			<i class="fa fa-search"></i>
		</div>
		<a href="https://docs.mattermost.com/" class="header__logo">
			<img width="176" src="https://about.mattermost.com/wp-content/uploads/2017/08/Mattermost-Logo-Blue.svg">
		</a>
		<div class="links__icon">
			<i class="fa fa-bars"></i>
		</div>
		<ul class="header__links">
			<li><a href="https://developers.mattermost.com/">Developers</a></li>
			<li><a href="https://mattermost.com/features/">Product</a></li>
			<li><a href="https://mattermost.com/pricing/">Pricing</a></li>
			<li><a href="https://mattermost.com/blog/">Blog</a></li>
			<li><a href="https://mattermost.com/download/">Download</a></li>
			<li><a href="https://mattermost.com/trial/">Trial</a></li>
		</ul>
		<div class="header__searchbar">
			<form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
                <input type="text" name="q" placeholder="Search by keyword" autofocus />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
		</div>
	</div>
</header>
	<script type="text/javascript">
		/* Temporary fix for the search capability. Fix has been committed to the theme's master;
		   however, waiting a new release to the theme.  This fix should remain in place until that
		   time.  sphinx_rtd_theme is current v0.1.10a0. Commit for the fix in the
		   theme can be found at: https://github.com/snide/sphinx_rtd_theme/commit/a5e0e304
		 */
        if(DOCUMENTATION_OPTIONS) {
			DOCUMENTATION_OPTIONS.SOURCELINK_SUFFIX = '.txt'
        }
    </script>


</body>
</html>